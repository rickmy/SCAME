@{ ViewData["Title"] = "Inicio"; }

@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager
    <!-- FullCalendar-->
    <link href='~/Libs/fullcalendar-4.0.2/packages/core/main.css' rel='stylesheet' />
    <link href='~/Libs/fullcalendar-4.0.2/packages/daygrid/main.css' rel='stylesheet' />
    <script src='~/Libs/fullcalendar-4.0.2/packages/core/main.js'></script>
    <script src='~/Libs/fullcalendar-4.0.2/packages/interaction/main.js'></script>
    <script src='~/Libs/fullcalendar-4.0.2/packages/daygrid/main.js'></script>

    <!-- JQuery-->
    <script src="https://code.jquery.com/jquery-3.5.1.js"
            integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
            crossorigin="anonymous"></script>



    @if (SignInManager.IsSignedIn(User))
    {
        @if (User.IsInRole("Paciente"))
        {
            <header class="section-top-small-padding background-image text-center" style="background-image:url(img/img-05.jpg)">

                <i class="icon-sli-heart text-white text-size-40"></i>
                <h1 class="text-extra-thin text-white text-s-size-30 text-m-size-40 text-size-50 text-line-height-1 margin-bottom-40 ">
                    Sistema de Consulta y Agendación de Citas Médicas Especializadas
                </h1>
                <p class="text-white">Busca un consultorio que se ajuste a tus requerimientos, observa la variedad <br /> de especialidades que tienen y con tan solo unc lick agenda una cita</p>
                <i class="slow icon-sli-arrow-down text-white margin-top-20 text-size-16"></i>

            </header>

            <section class="section-top-small-padding background-white">
                <center>
                    <div class="col-sm-6 padding">
                        <form class="form-search" method="get" id="s" asp-action="Search" asp-controller="Home">
                            <div class="input-append">
                                <input type="text" class="input-medium search-query" name="especialidad" placeholder="Search" value="">
                                <button type="submit" class="add-on">Buscar</button>
                            </div>
                        </form>
                    </div>
                </center>
                <div class="container padding-2x">
                    <div class="row">
                        <div class="col-sm-6 mb-3">
                            <div class="card">
                                <div class="card-header">
                                    Clínica Advertence
                                </div>
                                <div class="card-block">
                                    <img src="img/homePacientes/clinica1.jpg" width="600" height="250" />
                                    <p class="card-text">
                                        Atencion de lunes a viernes.
                                    </p>
                                    <a href="#" class="btn btn-primary">Ver</a>
                                </div>
                            </div>
                        </div>
                        <br>
                        <div class="col-sm-6 mb-3">
                            <div class="card">
                                <div class="card-header">
                                    Clínica Moderna
                                </div>
                                <div class="card-block">
                                    <img src="img/homePacientes/clinica2.jpg" width="600" height="250" />
                                    <p class="card-text">Atencion de lunes a viernes</p>
                                    <a href="#" class="btn btn-primary">Ver</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <br>
                    <div class="row">
                        <div class="col-sm-6 mb-3">
                            <div class="card">
                                <div class="card-header">
                                    Clínica el Bosque
                                </div>
                                <div class="card-block">
                                    <img src="img/homePacientes/clinica3.jpg" width="539" height="250" />
                                    <p class="card-text">atencion de lunes a sabado.</p>
                                    <a href="#" class="btn btn-primary">ver</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 mb-3">
                            <div class="card">
                                <div class="card-header">
                                    Clínica San Francisco
                                </div>
                                <div class="card-block">
                                    <img src="img/homePacientes/clinica7.jpg" width="539" height="250" />
                                    <p class="card-text">Atencion de lunes a viernes</p>
                                    <a href="#" class="btn btn-primary">Ver</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <br>

                    <div class="col-sm-6 mb-3">
                        <div class="card">
                            <div class="card-header">
                                Clínica San Pedro
                            </div>
                            <div class="card-block">
                                <img src="img/homePacientes/clinica5.jpg" width="524" height="250" />
                                <p class="card-text">Atencion de lunes a viernes.</p>
                                <a href="#" class="btn btn-primary">Ver</a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        }

        @if (User.IsInRole("Administrador"))
        {
            <div class="page-header ">
                <h1 class="h1 padding-2x text-strong text-dark"><small>Panel de Administración</small></h1>
                <hr />
            </div>
            <div class="col-md-12">
            </div>
            <section class="full-reset text-center" style="padding: 40px 0;">
                <a class="tile" asp-controller="Usuarios" asp-action="Index">
                    <div class="tile-icon full-reset background-grey"><i class="icon-users background-primary-dott"></i></div>
                    <div class="tile-num full-reset background-dark text-white">Usuarios no verificados</div>
                </a>
                <a class="tile" asp-controller="Pacientes" asp-action="Index">
                    <div class="tile-icon full-reset background-grey"><i class="icon-user"></i></div>
                    <div class="tile-num full-reset background-dark text-white">Pacientes</div>
                </a>
                <a class="tile" asp-controller="Consultorios" asp-action="Index">
                    <div class="tile-icon full-reset background-grey"><i class="icon-home"></i></div>
                    <div class="tile-num full-reset background-dark text-white">Consultorios</div>
                </a>
                <a class="tile" asp-controller="Roles" asp-action="Index">
                    <div class="tile-icon full-reset background-grey"><i class="icon-reload"></i></div>
                    <div class="tile-num full-reset background-dark text-white">Roles</div>
                </a>
                <a class="tile" asp-controller="Especialidades" asp-action="Index">
                    <div class="tile-icon full-reset background-grey"><i class="icon-information_black"></i></div>
                    <div class="tile-num full-reset background-dark text-white">Especialidades</div>
                </a>
                <a class="tile" asp-controller="Paises" asp-action="Index">
                    <div class="tile-icon full-reset background-grey"><i class="icon-information_black"></i></div>
                    <div class="tile-num full-reset background-dark text-white">Pais/Provincia/Ciudad</div>
                </a>
                <a class="tile" asp-controller="Discapacidades" asp-action="Index">
                    <div class="tile-icon full-reset background-grey"><i class="icon-discussion"></i></div>
                    <div class="tile-num full-reset background-dark text-white">Discapacidades</div>
                </a>
            </section>
        }
        @if (User.IsInRole("Consultorio"))
        {
            <section class="padding-2x background-white">
                <div >
                    <div >
                        <div>
                            <div id='calendar'></div>
                            <script>

                                //jQuery
                                $(function () {
                                    ObtenerCitas();
                                })
                                function ObtenerCitas() {


                                    $.get('/Home/TraerCitas', function (da) {
                                        console.log(da)
                                    }).done(function (info) {
                                        var exito = info.isSuccessful;
                                        console.log(info)
                                        if (exito) {
                                            var eventos = [];
                                            $.each(info.data, function (idx, elementos) {
                                                eventos.push({
                                                    'id': elementos.id,
                                                    'title': elementos.title,
                                                    'url': elementos.url,
                                                    'start': elementos.start,
                                                    'allDay': elementos.allDay,
                                                    'color': elementos.color,
                                                    'textColor': elementos.textColor
                                                })
                                            })

                                            console.log(eventos)
                                            var calendarEl = document.getElementById('calendar');
                                            var calendar = new FullCalendar.Calendar(calendarEl, {
                                                plugins: ['interaction', 'dayGrid'],
                                                header: {
                                                    left: 'prevYear,prev,next,nextYear today',
                                                    center: 'title',
                                                    right: 'dayGridMonth, dayGridWeek, dayGridDay'
                                                },
                                                editable: true,
                                                eventLimit: true, // allow "more" link when too many events
                                                eventClick: function (eventObj) {

                                                },
                                                events: eventos
                                            });
                                            console.log(eventos)
                                            calendar.render();
                                        } else {
                                            console.log("valiste")
                                        }

                                    });

                                }

                            </script>
                            <!--
                        <table>
                            <tr>
                                <td>Calendario</td>
                            </tr>
                            <tr>
                                <td>
                                    @*Html.ActionLink(" ", "Calendario", "Consultorios", new { @class = "btn btn-primary btn-sm fas fa-edit" })*@
                                </td>
                            </tr>
                        </table>
        -->
                        </div>
                    </div>
                </div>
                <br /><br /><br /><br /><br /><br /><br />
            </section>
        }
        @if (User.IsInRole("Usuario"))
        {
            Body();
        }}
    else
    {
        Body();
    }

    @{ void Body()
        {
            <header>
                <div id="carouselExampleCaptions" class="carousel slide" data-ride="carousel">
                    <ol class="carousel-indicators">
                        <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active"></li>
                        <li data-target="#carouselExampleCaptions" data-slide-to="1"></li>
                        <li data-target="#carouselExampleCaptions" data-slide-to="2"></li>
                    </ol>
                    <font COLOR="black">
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="img/intro-carousel/1.jpg" alt="New york" style="width:100%;">
                                <div class="carousel-caption d-none d-md-block">
                                    <i class="icon-sli-heart section-top-small-padding text-white text-size-20"></i>
                                    <h2>   Sistema de Consulta y Agendación de Citas Médicas Especializadas</h2>
                                    <b><p>Busca un consultorio que se ajuste a tus requerimientos, observa la variedad <br /> de especialidades que tienen y con tan solo unc lick agenda una cita.</p></b>
                                </div>
                            </div>
                            <div class="carousel-item">
                                <img src="img/intro-carousel/2.jpg" alt="New york" style="width:100%;">
                                <div class="carousel-caption d-none d-md-block">
                                    <h2>Queremos cuidarte a tiempo</h2>
                                    <p>¡Una vida sin miedos ni preocupaciones! Te acompañamos durante todo el proceso, con una atención personalizada podras agendar una cita medica desde la comoddad de tu casa</p>
                                </div>
                            </div>
                            <div class="carousel-item">
                                <img src="img/intro-carousel/3.jpg" alt="New york" style="width:100%;">
                                <div class="carousel-caption d-none d-md-block">
                                    <b><h2>Nosotros</h2></b>
                                    <p>Seremos el mejor sistema de Agendamiento con vocación de servicio y compromiso con el usuario..</p>
                                </div>
                            </div>
                        </div>
                        <a class="carousel-control-prev" href="#carouselExampleCaptions" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleCaptions" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </font>
                </div>
            </header> <!-- Section 2 -->
            <section class="section-top-small-padding background-white">
                <div class="line text-center">
                    <i class="icon-sli-magnifier-add text-primary text-size-40"></i>
                    <h2 class="text-dark text-size-50 text-m-size-40">Consultorios <b>Destacados</b></h2>
                    <hr class="break background-primary break-small break-center margin-bottom-50">

                </div>

                <div class="row row-cols-1 row-cols-md-3">
                    <div class="col mb-4">
                        <div class="card">
                            <img src="img/intro-carousel/consultorio1.jpg" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title">Clínica Atlas</h5>
                                <p class="card-text">Av. de los Planetas (Valle de los Chillos)</p>
                            </div>
                        </div>
                    </div>
                    <div class="col mb-4">
                        <div class="card">
                            <img src="img/intro-carousel/consultorio2.jpg" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title">Clínica Harvard</h5>
                                <p class="card-text">Av. Amazonas</p>
                            </div>
                        </div>
                    </div>
                    <div class="col mb-4">
                        <div class="card">
                            <img src="img/intro-carousel/consultorio3.jpg" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title">Clínica de la mujer</h5>
                                <p class="card-text">Carapungo frente al parque la patria</p>
                            </div>
                        </div>
                    </div>
                    <div class="col mb-4">
                        <div class="card">
                            <img src="img/intro-carousel/consultorio4.jpg" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title">Clínica Neurodencias</h5>
                                <p class="card-text">Av.10 de Agosto </p>
                            </div>
                        </div>
                    </div>
                    <div class="col mb-4">
                        <div class="card">
                            <img src="img/intro-carousel/clinica6.jpg" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title">Clínica la primavera</h5>
                                <p class="card-text">Av. 10 de Agosto</p>
                            </div>
                        </div>
                    </div>
                    <div class="col mb-4">
                        <div class="card">
                            <img src="img/intro-carousel/consultorio5.jpg" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title">Clínica Barbara</h5>
                                <p class="card-text">Frente a la alameda</p>
                            </div>
                        </div>
                    </div>
                </div>


            </section> } }
